<%_ script.create('JQuery')
  .add(`
$.bridge = {
    bridges: {},
    getLog(name) {
        const self = this;
        if (self.bridges[name]) {
            $.get('${route('Ui', {name: 'log', bridge: 'BRIDGE'})}'.replace(/BRIDGE/, name))
                .done(function(json) {
                    if (json.logs && $.addLog(self.bridges[name].log, json.logs)) {
                        self.bridges[name].time = json.time;
                    }
                });
        }
    },
    addLog(name, data) {
        const self = this;
        if (
            self.bridges[name] &&
            (self.bridges[name].time === undefined || data.time >= self.bridges[name].time)
        ) {
            if ($.addLog(self.bridges[name].log, data.message)) {
                self.bridges[name].time = data.time;
            }
        }
    },
    init(bridges) {
        const self = this;
        for (const bridge of bridges) {
            self.bridges[bridge] = {
                log: $(\`.log.\${bridge}\`)
            }
            self.getLog(bridge);
        }
    }
}
`) -%>